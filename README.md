# Домашнее задание к занятию «Микросервисы: принципы» - Курапов Антон

Вы работаете в крупной компании, которая строит систему на основе микросервисной архитектуры. 
Вам как DevOps-специалисту необходимо выдвинуть предложение по организации инфраструктуры для разработки и эксплуатации.

## Задача 1: API Gateway

Предложите решение для обеспечения реализации API Gateway. Составьте сравнительную таблицу возможностей различных программных решений. На основе таблицы сделайте выбор решения.

Решение должно соответствовать следующим требованиям:

* маршрутизация запросов к нужному сервису на основе конфигурации,
* возможность проверки аутентификационной информации в запросах,
* обеспечение терминации HTTPS.

Обоснуйте свой выбор.

## Задача 2: Брокер сообщений

Составьте таблицу возможностей различных брокеров сообщений. На основе таблицы сделайте обоснованный выбор решения.

Решение должно соответствовать следующим требованиям:

* поддержка кластеризации для обеспечения надёжности,
* хранение сообщений на диске в процессе доставки,
* высокая скорость работы,
* поддержка различных форматов сообщений,
* разделение прав доступа к различным потокам сообщений,
* простота эксплуатации.

Обоснуйте свой выбор.


### Решение 1: API Gateway

#### Сравнительная таблица возможностей

| Решение                 | Маршрутизация запросов | Проверка аутентификации | Терминация HTTPS | Масштабируемость | Поддержка логирования | Простота конфигурации |
|-------------------------|------------------------|------------------------|-----------------|-----------------|----------------------|----------------------|
| **NGINX**               | Да                     | Да (через модули)      | Да              | Средняя         | Да                   | Высокая              |
| **Kong**                | Да                     | Да (плагины)           | Да              | Высокая         | Да                   | Средняя              |
| **HAProxy**             | Да                     | Да (внешние модули)    | Да              | Высокая         | Да                   | Средняя              |
| **Traefik**             | Да                     | Да                     | Да              | Высокая         | Да                   | Высокая              |
| **AWS API Gateway**     | Да                     | Да                     | Да              | Высокая         | Да                   | Средняя              |

#### Обоснование выбора
Для реализации API Gateway выбираем **Kong** по следующим причинам:
- Поддержка всех необходимых требований: маршрутизация запросов, проверка аутентификации через удобные плагины, терминация HTTPS.
- Высокая масштабируемость, необходимая для микросервисной архитектуры.
- Простота интеграции с различными сервисами.
- Активное сообщество и регулярные обновления.

**Kong** сочетает функциональность, расширяемость и широкие возможности настройки, что делает его оптимальным выбором для современной инфраструктуры.

---

### Решение 2: Брокер сообщений

#### Сравнительная таблица возможностей

| Брокер сообщений        | Поддержка кластеризации | Хранение сообщений | Высокая скорость | Поддержка форматов | Разделение прав | Простота эксплуатации |
|-------------------------|-------------------------|-------------------|-----------------|------------------|----------------|-----------------------|
| **RabbitMQ**            | Да                      | Да                | Средняя         | JSON, XML, др.   | Да             | Средняя               |
| **Apache Kafka**        | Да                      | Да                | Высокая         | Avro, JSON, др.  | Да             | Сложнее               |
| **ActiveMQ**            | Да                      | Да                | Средняя         | JSON, XML, др.   | Да             | Средняя               |
| **Redis (Streams)**     | Да                      | Да                | Очень высокая   | JSON             | Ограниченная   | Высокая               |
| **NATS**                | Да                      | Нет               | Высокая         | Простой текст    | Да             | Высокая               |

#### Обоснование выбора
Выбираем **Apache Kafka** по следующим причинам:
- Поддержка кластеризации обеспечивает высокую надёжность.
- Хранение сообщений на диске позволяет сохранить данные при сбоях.
- Высокая скорость работы подходит для обработки большого объёма сообщений.
- Поддержка различных форматов сообщений (Avro, JSON).
- Гибкое разделение прав доступа.

Несмотря на более сложную эксплуатацию, **Kafka** предоставляет исключительную производительность и надёжность для систем с высоким трафиком.

---

### Заключение
Рекомендованные решения — Kong для API Gateway и Apache Kafka для брокера сообщений — обеспечат производительность, надёжность и гибкость, необходимые для построения микросервисной архитектуры.

